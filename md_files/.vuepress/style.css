:root {
  /* Adapt VitePress variables to VuePress or define them */
  --font-family: "Noto Sans SC", -apple-system, "Source Han Sans SC",
    "PingFang SC", "Microsoft YaHei", "WenQuanYi Micro Hei", "MiSans L3",
    "HarmonyOS Sans", "Segoe UI", sans-serif;
  --font-family-code: "JetBrains Mono", "Fira Code", "Consolas", "Monaco",
    "Andale Mono", "Ubuntu Mono", monospace, sans-serif;

  /* VuePress variables */
  --c-brand: #3451b2; /* Indigo from VitePress config */
  --c-brand-light: #3a5ccc;

  /* Custom variables used in alert styles if I keep them */
  --vp-c-brand-1: var(--c-brand);
  --vp-c-brand-soft: rgba(100, 108, 255, 0.14);
  --vp-c-green-1: #18794e;
  --vp-c-green-soft: rgba(16, 185, 129, 0.14);
  --vp-c-yellow-1: #915930;
  --vp-c-yellow-soft: rgba(234, 179, 8, 0.14);
  --vp-c-red-1: #b8272c;
  --vp-c-red-soft: rgba(244, 63, 94, 0.14);
  --vp-c-text-1: #3c3c43;

  /* Anchor highlight (light) */
  --anchor-highlight-bg: #fff3cd;
}

/* Dark mode overrides */
html.dark {
  --anchor-highlight-bg: rgba(255, 235, 150, 0.28);
}

/* Adapt selectors */
.theme-default-content {
  font-size: 16px;
  line-height: 2;
}

/* 正文/列表断词：不改行高，避免影响普通正文 */
.theme-default-content p,
.theme-default-content ul,
.theme-default-content ol,
main.vp-page > [vp-content] p,
main.vp-page > [vp-content] ul,
main.vp-page > [vp-content] ol {
  overflow-wrap: break-word;
}

/* 仅收紧“宽松列表”（Markdown loose list 的特征：li > p） */
.theme-default-content li > p,
main.vp-page > [vp-content] li > p {
  line-height: 2;
  margin: 0 0 0em;
}

/* 同步“紧凑列表”（Markdown tight list：li 直接文本）行高 */
.theme-default-content li,
main.vp-page > [vp-content] li {
  line-height: 2;
}

.theme-default-content li > p:last-child,
main.vp-page > [vp-content] li > p:last-child {
  margin-bottom: 0;
}

.theme-default-content p {
  margin: 0 0 0em;
}

.theme-default-content p:last-child {
  margin-bottom: 0;
}

/* 全局正文宽度：最小 320px，理想 1080px，最大 1200px */
@media (min-width: 960px) {
  .theme-default-content,
  main.vp-page > [vp-content],
  .vp-page-meta,
  .vp-page-nav {
    max-width: clamp(320px, 90vw, 1200px);
    margin: 0 auto;
    padding-left: 20px;
    padding-right: 20px;
  }
}

/* 小屏增强：留出更大边距避免贴边 */
@media (max-width: 959px) {
  .theme-default-content,
  main.vp-page > [vp-content],
  .vp-page-meta,
  .vp-page-nav {
    max-width: 100%;
    margin: 0 auto;
    padding-left: 16px;
    padding-right: 16px;
  }
}

/* 图片防溢出 */
main.vp-page img {
  max-width: 100%;
  height: auto;
}

.table-compact {
  border-collapse: collapse;
  border-spacing: 0;
}
.table-compact td,
.table-compact th {
  padding: 3pt;
  text-align: center;
  border: 1px solid #000000;
}

/* 表格第一行默认加粗 */
.table-compact tr:first-child td {
  font-weight: bold;
}

/* 解决锚点跳转被顶部栏遮挡：为锚点、标题、脚注设置滚动偏移 */
:target,
[id],
.theme-default-content h1,
.theme-default-content h2,
.theme-default-content h3,
.theme-default-content h4,
.theme-default-content h5,
.theme-default-content h6,
.theme-default-content sup[id^="fnref"],
.theme-default-content sup[id^="fn"] {
  scroll-margin-top: 96px;
}

/* 锚点跳转后的临时高亮，3 秒淡出 */
:target {
  animation: anchor-highlight 5s ease-out;
}

/* 脚注回跳（#fnref*）时，高亮其所在段落/列表项 */
.anchor-highlight-block {
  animation: anchor-highlight 5s ease-out;
}

/* 仅在脚注项内高亮段落，不高亮整个列表项（避免影响 ::marker） */
.footnote-item:target {
  animation: none;
}

.footnote-item:target > p {
  animation: anchor-highlight 5s ease-out;
}

@keyframes anchor-highlight {
  0% {
    background-color: var(--anchor-highlight-bg);
  }
  100% {
    background-color: transparent;
  }
}

/* 增加嵌套列表的缩进 */
.theme-default-content ol ol,
.theme-default-content ul ol,
.theme-default-content ol ul,
.theme-default-content ul ul,
main.vp-page > [vp-content] ol ol,
main.vp-page > [vp-content] ul ol,
main.vp-page > [vp-content] ol ul,
main.vp-page > [vp-content] ul ul {
  padding-left: 2em;
}

/* 自定义有序列表序号格式 */
.theme-default-content ol,
main.vp-page > [vp-content] ol {
  list-style: none;
  counter-reset: ol-counter;
}

.theme-default-content ol > li,
main.vp-page > [vp-content] ol > li {
  counter-increment: ol-counter;
  position: relative;
}

/* Level 1: 1. */
.theme-default-content ol > li::before,
main.vp-page > [vp-content] ol > li::before {
  content: counter(ol-counter) ".";
  position: absolute;
  left: -2.5em;
  width: 2em;
  text-align: right;
  color: var(--vp-c-text-1);
  font-variant-numeric: tabular-nums;
}

/* Level 2: (1). */
.theme-default-content ol ol > li::before,
main.vp-page > [vp-content] ol ol > li::before {
  content: "(" counter(ol-counter) ")";
  left: -3.5em;
  width: 3em;
}

/* Level 3: <1>. */
.theme-default-content ol ol ol > li::before,
main.vp-page > [vp-content] ol ol ol > li::before {
  content: "<" counter(ol-counter) ">";
}

/* Level 4: [1]. */
.theme-default-content ol ol ol ol > li::before,
main.vp-page > [vp-content] ol ol ol ol > li::before {
  content: "[" counter(ol-counter) "]";
}

/* 增加脚注与正文的间距 */
.footnotes {
  margin-top: 4rem;
}

/* 全局正文链接点击后变色（排除标题锚点） */
.theme-default-content a:not(.header-anchor):visited,
main.vp-page > [vp-content] a:not(.header-anchor):visited {
  color: #003399;
}
